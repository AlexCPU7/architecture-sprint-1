# Задание 1
> Информация для проверяющего, выполнил только 1 и 2 задание. Так как с фронтендом ранее не работал и React я не знаю.

В данном проекте стоит выбрать React для реализации микрофронтендов.
Так как у команды уже есть написанный проект на React и им будет проще его попилить на микрофронтенды.
Так же, команда имеет экспертизу по данному фреймворку.

В данном проекте, на мой взгляд, предпочтительнее использовать Webpack Module Federation:
- Весь проект будет написан на React и использовать другие языки мы не планируем.
  Так как команда больше сфокусирована на React.
  Фактически тут все готово, необходимо разделить этот монолитный фронтед на микрофронтенды
- Данный подход обеспечит всем компонентам использовать общий код.
  Это позволит избежать дублирование кода и поддерживать чистоту в проекте.
- Так же, данный подход сократит время перехода на микрофронтенды и релиз выйдет быстрее.
  Так как фактически тут все готово, необходимо разделить этот монолитный фронтед на микрофронтенды

Список микрофронтендов:
- **Основное приложение (host-microfrontend)** - микрофронтенд основного приложения хост, содержит в себе общие компоненты для ремоутов.
- **Аутентификация (auth-microfrontend)** - микрофронтенд отвечает за форму аутентификации и регистрации пользователя.
- **Профиль (profile-microfrontend)** - Микрофронтенд выводит информацию о пользователе с возможностью. его редактирования.
- **Галерея фотографий (gallery-microfrontend)** - микрофронтенд отвечает за отображение каталога фотографий и самих фотографий.
  В будущем, можно выделить отображение фотографии в отдельный микрофронтенд.
  Когда данный функционал обрастет большим функционалом и будет необходимо выводить больше информации.
  Но на данном этапе, это можно пропустить.

Структура проекта:
```
/frontend/microfrontend
    /host-microfrontend                // Микрофронтенд хост
        /src
            /blocks
                /content               // Стили для компонента контента
                /footer                // Стили для компонента футер
                /header                // Стили для компонента хедер
                /page                  // Стили для компонента приложения
                /popup                 // Стили для компонента всплывающего окна
            /components
                App.js                 // Компонент приложения
                Footer.js              // Компонент футера
                Header.js              // Компонент хедера
                Main.js                // Компонент главной страницы с фотографиями и профилем пользователя
                PopupWithForm.js       // Компонент всплывающего окна
                ProtectedRoute.js      // Компонент редиректит на страницу аутентификации
            /contexts
                CurrentUserContext.js  // Содержит контекст пользователя
            /images                    // Иконки используемые микрофронтендом
            /utils
                api.js                 // Утилита для получения данных о пользователе
            /vendor                    // Стили теста приложения
            index.css                  // Общие стили 
            logo.svg                   // Иконка
            serviceWorker.js           // Воркер
            setupTests.js              // Тесты
            index.js                   // Точка входа микрофронтенда
        .gitignore                     // Файл .gitignore
        package.json                   // Зависимости и скрипты микрофронтенда
        webpack.config.js              // Настройка webpack микрофротенда
    /auth-microfrontend                // Микрофронтенд аутентификации
        /src
            /blocks
                /auth-form             // Стили для компонента регистрации и аутентификации
                /login                 // Стили для компонента входа пользователя
            /components
                InfoTooltip.js         // Компонент вывода сообщения успешной или не успешной аутентификации
                Login.js               // Компонент входа пользователя
                Register.js            // Компонент регистрации пользователя
            /utils
                api.js                 // Утилиты для аутентификации
            index.js                   // Точка входа микрофронтенда
        .gitignore                     // Файл .gitignore
        package.json                   // Зависимости и скрипты микрофронтенда
        webpack.config.js              // Настройка webpack микрофротенда
    /profile-microfrontend             // Микрофронтенд профиля пользователя
        /src
            /blocks
                /profile               // Стили для компонента профиля пользователя
            /components
                EditAvatarPopup.js     // Компонент для редактирования аватара
                EditProfilePopup.js    // Компонент для редактирования профиля
            /images                    // Иконки используемые микрофронтендом
            /utils
                api.js                 // Утилиты для работы с профилем пользователя
            index.js                   // Точка входа микрофронтенда
        .gitignore                     // Файл .gitignore
        package.json                   // Зависимости и скрипты микрофронтенда
        webpack.config.js              // Настройка webpack микрофротенда
    /gallery-microfrontend             // Микрофронтенд галереи фотографий
        /src
            /blocks
                /card                  // Стили для компонента фотографий
                /places                // Стили для компонента добавления фотографии
            /components
                AddPlacePopup.js       // Компонент добавления фотографии
                Card.js                // Компонент фотографии
                ImagePopup.js          // Компонент просмотра фотографии
            /images                    // Иконки используемые микрофронтендом
            /utils
                api.js                 // Утилиты для работы с фотографиями
            index.js                   // Точка входа микрофронтенда
        .gitignore                     // Файл .gitignore
        package.json                   // Зависимости и скрипты микрофронтенда
        webpack.config.js              // Настройка webpack микрофротенда
```

# Задание 2

Файл [arch_template_task2.drawio](arch_template_task2.drawio)

Я решил подробить монолит на микросервисы по принципу каждый сервис это своя отдельная область работы во всей системы.
Общаться между собой сервисы будет с помощью "Шины данных", которая будет реализованная с помощью Kafka.
Можно кончено оставить REST API, но кажется так, что это будет менее эффективно и так же в некоторых сервисах
отказаться от Django и перейти на FastAPI. Но в контексте данной задачи, на мой взгляд,
использовать шину данный будет лучшим решением.

Поэтому я по итогу получил следующий список микросервисов:
- **Сервис аутентификации** - данный сервис нужен для аутентификации пользователя;
- **Сервис профиля пользователя** - данный сервис хранит в себе всю информацию о пользователе
- **Сервис товаров** - данных сервис хранит в себе информацию о товарах и дает возможность их изменить
- **Сервис заказов** - данных сервис хранит в себе информацию о заказах и дает возможность их изменить
- **Сервис услуг** - данных сервис хранит в себе информацию об услугах и дает возможность их изменить
- **Сервис аукциона** - данный сервис предоставляет функционал по созданию и редактирование аукциона
- **Сервис апелляции** - сервис предоставляет возможность зарегистрировать? создать и обновить статус апелляции
- **Сервис отчетов** - этот сервис реализует в себе выполнение периодических задач. То есть, задачи,
  которые занимают долгое время работы и их необходимо выполнять отдельно. Что бы равномерно распределить нагрузку,
- необходимо будет сделать несколько очередей и настроить приоритеты по выполняемым задачам.
- **Сервис уведомлений** - данный сервис будет работать с веб-сокетами, для того, чтобы отправлять уведомления клиентам
- **Сервис технической поддержки** - данный сервис будет работать с заявками от пользователей по каким-либо вопросам
- **Сервис оплаты** - данный сервис отвечает за оплату заказов

По фронтенду могу сказать следующее. В данном случае фронтенд можно оставить в текущем виде, но конечно в будущем
лучше попилить на микрофронтенды.
Фронтенд для администрации и технической поддержки идет отдельным приложением.
Тк они исполняют разные обязанности и тащить их во фронтед для клиента будет избыточно, мы лишь перегрузим его.

Как будет выглядеть взаимодействия на портале:
- Поток 1. Клиент заходи на портал
- Поток 2. Регистрация пользователя
- Поток 2.1. Отправляем уведомление пользователю
- Поток 3. Аутентификация
- Поток 4. Работа пользователя с товарами (CRUD операции)
- Поток 5. Работа пользователя с услугами (CRUD операции)
- Поток 6. Пользователь создает заказ и заполняет всю необходимую информацию, может просматривать все его заказы
- Потом 6.1. Уведомляем пользователя об изменении состояния заказов
- Поток 7. Пользователь создает аукцион
- Поток 8. Администрация редактирует аукцион
- Поток 8.1. Уведомляем участников аукциона
- Поток 9. Пользователь создает заявку на апелляцию по необходимости
- Поток 10. Администрация валидирует заявку
- Поток 11. Пользователь оплачивает товар/услугу
- Поток 12. Инициировать платёж — торговая площадка инициирует платёж, отправив необходимые данные
  (ID пользователя, ID заказа, сумма заказа) в платёжный сервис.
- Поток 13. Предоставить статус платежа — платёжный сервис принял запрос на проведение оплаты, подтвердил возможность
  проведения платежа со счёта клиента, назначил идентификатор для этой транзакции и установил статус.
- Поток 14. Подтверждение платежа — торговая площадка уведомляет платёжный сервис о подтверждении операции,
  отправляя ID транзакции.
- Поток 15. Запросить статус платежа — торговая площадка отправляет запрос в платёжный сервис
  для получения текущего статуса обработки транзакции по ID.
- Поток 16. Подтверждение отмены платежа (альтернативный сценарий) — платёжный сервис уведомляет систему об успешной
  отмене платежа, предоставляя статус отменённой транзакции.
- Поток 17. Пользователь обращается в тех. поддержку
- Поток 18. Специалист тех. поддержки берет заявку в работу, работает по ней и изменяет ее статус
- Поток 19. Администратор формирует отсчет по продажам, по активностям пользователей, выгружает статистику по заказам,
  фильтрует и сортирует результаты
